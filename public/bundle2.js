!function(e,o){"use strict";const r=e.initializeApp({apiKey:"AIzaSyDs8wTtgLSOg-bnLpBK4K5Hege66pg9wVQ",authDomain:"streamixmovie.firebaseapp.com",projectId:"streamixmovie",storageBucket:"streamixmovie.appspot.com",messagingSenderId:"724237092696",appId:"1:724237092696:web:7e2f773517853bb6b5872d"}),t=o.getFirestore(r);document.addEventListener("DOMContentLoaded",(function(){try{console.log("holaaaaaa");const e=JSON.parse(localStorage.getItem("usuario"));if(e&&e.nombre){console.log("Usuario recuperado:",e);const r=document.querySelector(".profile-name");r?r.textContent=e.nombre:console.error("No se encontró el elemento .profile-name");const a=document.getElementById("saveNameButton"),n=document.querySelector(".inputnamenew"),s=document.getElementById("savenewname"),c=document.querySelector(".profiledatenew");a&&n&&s?a.addEventListener("click",(function(){console.log('Botón "Administrar perfiles" clickeado'),c.classList.toggle("active"),setTimeout((()=>{n.classList.toggle("active"),s.classList.toggle("active"),n.value=e.nombre,console.log("Campo de edición mostrado con valor:",n.value)}),40)})):console.error("No se encontraron los elementos necesarios para editar el nombre"),s?s.addEventListener("click",(async function(){try{const r=n.value;if(console.log("Nuevo nombre ingresado:",r),r.trim()&&e&&e.usuarioId){const a=await async function(e,r){try{const a=o.doc(t,"usuarios",e);await o.updateDoc(a,{nombreUsuario:r});const n=JSON.parse(localStorage.getItem("usuario"));return n&&(n.nombre=r,localStorage.setItem("usuario",JSON.stringify(n))),console.log("Nombre del usuario actualizado correctamente."),{success:!0}}catch(e){return console.error("Error al actualizar el nombre del usuario:",e),{success:!1,reason:"Error al actualizar el nombre del usuario",details:e.message}}}(e.usuarioId,r);a.success?(document.querySelector(".profile-name").textContent=r,n.classList.remove("active"),s.classList.remove("active"),setTimeout((()=>{c.classList.remove("active"),console.log("Nombre actualizado y campo de edición oculto")}),250)):(console.error("Error al actualizar el nombre:",a.reason),alert(`Error: ${a.reason}`))}else alert("El nombre no puede estar vacío")}catch(e){console.error('Error en el evento del botón "Guardar":',e),alert("Ocurrió un error al intentar guardar el nuevo nombre")}})):console.error("No se encontró el botón de guardar");const l=document.querySelector(".profile_img");l?l.addEventListener("click",(()=>{window.location.href="index.html"})):console.error("No se encontró el elemento con la clase .profile_img")}else console.log("No se encontró el nombre del usuario en localStorage.")}catch(e){console.error("Error al inicializar la página:",e)}}))}(app,lite);
